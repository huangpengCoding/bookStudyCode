

## 回答
  幂等性：例如一次请求和多次请求，资源状态返回是一样的

1.什么是幂等性，就是你操作无数波操作和你操作一波效果一毛一样的。比如你下单，不会说疯狂点，下n张一样的单。

2.那如何做到幂等性处理呢？

关键所在是他们有唯一的区别性id之类的，比如唯一的订单号，可以防止你多次支付

如何防止你一激动，疯狂点提交呢？
解决方案：

1）当你提交之后，按钮给你变成不可按的，看你还怎么皮，哈哈

2）每当你访问一个页面时，生成一个token（唯一的），储存在redis，为了和你传过来的token对比真实性。如果你多次提交，在redis上如果存在这个token说明你已经提交一次了，再次提交就失效了。

还有一些实际的处理方案
1）利用乐观锁

通过版本号去控制

2）悲观锁也行

select * from xx for update

悲观锁和乐观锁的区别

悲观锁和乐观锁是数据库用来保证数据并发安全防止更新丢失的两种方法，楼主列举的例子在select ... for update前加个事务就可以防止更新丢失。悲观锁和乐观锁大部分场景下差异不大，一些独特场景下有一些差别，一般我们可以从如下几个方面来判断：
1.响应速度：如果需要非常高的响应速度，建议采用乐观锁方案，成功就执行，不成功就失败，不需要等待其他并发去释放锁
2.冲突频率：如果冲突频率非常高，建议采用悲观锁，保证成功率，如果冲突频率大，乐观锁会需要多次重试才能成功，代价比较大
3.重试代价：如果重试代价大，建议采用悲观锁

3)redis分布式锁

支付完删除值，所以可以防止多次提交

4）token令牌的问题

支付前拿到一个token，然后支付的时候带上这个token，验证真实性然后如果redis上有这个token说明还没支付，否则就已经支付完成