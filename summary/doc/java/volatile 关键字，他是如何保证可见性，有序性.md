
问题：volatile 关键字，他是如何保证可见性，有序性

> 1. volatile 可以保证线程可见性且提供了一定的有序性，但是无法保证原子性。在 JVM 底 层 volatile 是采用“内存屏障”来实现的。 观察加入 volatile 关键字和没有加入 volatile 关键字时所生成的汇编代码发现，加入 volatile 关键字时，会多出一个 lock 前缀指令， lock 前缀指令实际上相当于一个内存屏障（也成内存栅栏），内存屏障会提供 3 个功 能：I. 它确保指令重排序时不会把其后面的指令排到内存屏障之前的位置，也不会把前面 的指令排到内 存屏障的后面；即在执行到内存屏障这句指令时，在它前面的操作已经全部完成； II. 它会强制将对缓存的修改操作立即写入主存； III. 如果是写操作，它会导致其他 CPU 中对应的缓存行无效。 
> 2. 参考文章：https://blog.csdn.net/summerZBH123/article/details/80547516